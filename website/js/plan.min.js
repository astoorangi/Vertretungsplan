var date=new Date;function showInfo(){$('#infos').append(getCookie('klasse'))}function updateDate(a){date.setDate(date.getDate()+a),showDate(),showVertretungen(),showMotd()}function showDate(){$('#datum').html(['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'][date.getDay()]+', '+date.toLocaleDateString())}function showVertretungen(){var a='api/'+getCookie('urlhash')+'/'+date.toLocaleDateString()+'/'+getCookie('klasse');$('tbody').empty(),$.ajax({url:a}).done(function(b){console.log(b);var d=date.toLocaleDateString(),e=b[d],f='';if(null==e)f+='<tr><td colspan="8">Keine Daten f\xFCr den heutigen Tag vorhanden.</td></tr>';else if(0==e.length)f+='<tr><td colspan="8">Heute leider keine Vertretungen :(</td></tr>';else for(let h of e){var g='';'Entfall'==h.art?g=' class="danger"':'Raum-Vtr.'==h.art&&(g=' class="warning"'),f+='<tr'+g+'><td>'+checkPrint(h.stunden.toString().replace(',',' - '))+'</td><td>'+checkPrint(h.fachalt)+'</td><td>'+checkPrint(h.fach)+'</td><td>'+checkPrint(h.art)+'</td><td>'+checkPrint(h.raum)+'</td><td>'+checkPrint(h.vertreter)+'</td><td>'+checkPrint(h.text)+'</td><td>'+checkPrint(h.klasse.toString().replace(/,/g,', '))+'</td></tr>'}$('tbody').html(f)})}function showMotd(){var a='api/'+getCookie('urlhash')+'/'+date.toLocaleDateString()+'/motd';$('#motdtext').empty(),$.ajax({url:a}).done(function(b){console.log(b);date.toLocaleDateString();$('#motdtext').html(b)})}function checkPrint(a){return null===a?'':a}function reset(){var a=new Date(0);document.cookie='klasse=; expires='+a+'; path=/',document.cookie='url=; expires='+a+'; path=/',document.cookie='urlhash=; expires='+a+'; path=/',checkState()}function getCookie(a){for(var g,b=a+'=',d=decodeURIComponent(document.cookie),e=d.split(';'),f=0;f<e.length;f++){for(g=e[f];' '==g.charAt(0);)g=g.substring(1);if(0==g.indexOf(b))return g.substring(b.length,g.length)}return''}function setCookie(){var a=new Date,b=a.getTime()+31536000000;a.setTime(b);var d=$('#klasse')[0].value,e=$('#url')[0].value,f=sha1(e);document.cookie='klasse='+d+'; expires='+a.toUTCString()+'; path=/',document.cookie='url='+e+'; expires='+a.toUTCString()+'; path=/',document.cookie='urlhash='+f+'; expires='+a.toUTCString()+'; path=/',checkState()}function form(a){!0==a?($('#popup').css('display','block'),$('#content nav').css('display','none'),$('#content main').css('display','none'),$('#motd').css('display','none'),$.getScript('js/sha1.min.js')):($('#popup').css('display','none'),$('#content nav').css('display','block'),$('#content main').css('display','block'),$('#motd').css('display','block'),showInfo(),showDate(),showVertretungen(),showMotd())}function checkState(){''==getCookie('klasse')||''==getCookie('url')||''==getCookie('urlhash')?form(!0):form(!1)}